generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id           Int           @id @default(autoincrement())
  email        String        @unique
  name         String
  createdAt    DateTime      @default(now())
  money        Decimal       @default(0.00)
  password     String?
  googleId     String?       @unique
  provider     String?       @default("local")
  budgets      Budget[]      @relation("UserBudgets")
  transactions Transaction[] @relation("UserTransactions")
}

model Transaction {
  id          Int      @id @default(autoincrement())
  name        String
  description String
  amount      Decimal
  userId      Int
  date        DateTime
  category    Category @default(OTHER)
  user        User     @relation("UserTransactions", fields: [userId], references: [id])
}

model Budget {
  id        Int      @id @default(autoincrement())
  userId    Int
  category  Category
  amount    Decimal
  startDate DateTime
  endDate   DateTime
  spent     Decimal  @default(0.0)
  user      User     @relation("UserBudgets", fields: [userId], references: [id])
}

model StockData {
  id        Int      @id @default(autoincrement())
  ticker    String
  date      DateTime
  open      Decimal
  high      Decimal
  low       Decimal
  close     Decimal
  volume    BigInt

  @@unique([ticker, date])
  @@index([ticker, date])
  @@map("stock_data") 
}

enum Category {
  FOOD
  TRANSPORT
  ENTERTAINMENT
  UTILITIES
  HEALTH
  OTHER
  SALARY
}
